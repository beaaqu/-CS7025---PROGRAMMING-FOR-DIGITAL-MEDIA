<!DOCTYPE html>
<html>
<head>
  <title>Weather by City</title>
</head>
<body>
  <h1>Check Weather</h1>

  <!-- Input field for city name -->
  <label for="cityInput">Enter city name:</label>
  <input type="text" id="cityInput" placeholder="e.g., Milan">
  <!-- Button to fetch weather -->
  <button id="getWeatherBtn">Get Weather</button>

  <!-- Paragraph to display weather result -->
  <p id="weather">Weather will appear here.</p>

  <script>
    // WeatherAPI.com key
    const apiKey = "053e74eca9984bbe9c4103143250910";

    // DOM elements
    const $cityInput = document.getElementById("cityInput");
    const $getWeatherBtn = document.getElementById("getWeatherBtn");
    const $weather = document.getElementById("weather");

    /**
     * Fetch weather from WeatherAPI for a given city
     * @param {string} city - The city name to fetch weather for
     */
    function fetchWeather(city) {
      // Build API URL, encode city name to handle spaces/special characters
      const url = `https://api.weatherapi.com/v1/current.json?key=${apiKey}&q=${encodeURIComponent(city)}`;

      // Show loading message
      $weather.textContent = "Loading...";

      // Fetch weather data from WeatherAPI
      fetch(url)
        .then(response => {
          // If response is not OK (e.g., city not found), throw an error
          if (!response.ok) {
            throw new Error("City not found or API error");
          }
          return response.json(); // Parse JSON response
        })
        .then(data => {
          // Extract temperature (Celsius) and description from API response
          const temp = data.current.temp_c;
          const desc = data.current.condition.text;

          // Display weather in the page
          $weather.textContent = `Weather in ${data.location.name}: ${temp}Â°C, ${desc}`;
        })
        .catch(error => {
          // If any error occurs, show a generic error message and log details
          $weather.textContent = "Error fetching weather.";
          console.error("Detailed error:", error);
        });
    }

    // Add click event to button
    $getWeatherBtn.addEventListener("click", () => {
      const city = $cityInput.value.trim(); // Get city name from input
      if (city) {
        fetchWeather(city); // Call function to fetch weather
      } else {
        alert("Please enter a city name"); // Alert if input is empty
      }
    });
  </script>
</body>
</html>
