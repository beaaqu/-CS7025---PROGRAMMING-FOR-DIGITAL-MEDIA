<!DOCTYPE html>
<html>
<head>
  <title>Milan Weather</title>
</head>
<body>
    
  <h1>Current Weather in Milan</h1>

  <!-- Paragraph to display the weather or error messages -->
  <p id="weather">Loading...</p>

  <script>
    // WeatherAPI.com key
    const apiKey = "053e74eca9984bbe9c4103143250910";

    // API endpoint for current weather in Milan
    // We include the API key and the query (city name) in the URL
    const url = `https://api.weatherapi.com/v1/current.json?key=${apiKey}&q=Milan`;

    // Fetch data from WeatherAPI
    fetch(url)
      .then(response => {
        // Check if the response status is OK (status code 200)
        if (!response.ok) {
          // If not, throw an error to be caught in the catch block
          throw new Error("HTTP error " + response.status);
        }
        // Parse the JSON response body
        return response.json();
      })
      .then(data => {
        // Extract the temperature in Celsius from the API response
        const temp = data.current.temp_c;

        // Extract the textual description of the weather (e.g., "Sunny")
        const desc = data.current.condition.text;

        // Update the paragraph on the page with the temperature and description
        document.getElementById("weather").textContent =
          `Temperature: ${temp}Â°C, ${desc}`;
      })
      .catch(error => {
        // If any error occurs (e.g., network error, invalid API key), display a message
        document.getElementById("weather").textContent = "Error fetching weather.";

        // Log detailed error info to the browser console for debugging
        console.error("Detailed error:", error);
      });
  </script>
</body>
</html>
